AS68HC11 Assembler - Computer Engineering Tech.  -  Version: 1.56gb    Page 1
by Simon Walker


                              1 				.title by Simon Walker
                              2 ;**************************************************************************
                              3 ;* Sample.asm                                                             *
                              4 ;*                                                                        *
                              5 ;* The purpose of this program is to demonstrate source file page layout  *
                              6 ;* and basic AS6811 assembler syntax.                                     *
                              7 ;**************************************************************************
                              8 
                              9 ;.------------------------------------------------------------------------.
                             10 ;|                           EQUATES SECTION                              |
                             11 ;`------------------------------------------------------------------------'
                             12 
   C000                      13 LED			=	0xC000			; 2-digit LED display.
   1040                      14 RAMSTART	=	0x1040			; first byte of large RAM block
   7FFF                      15 RAMEND		=	0x7FFF			; end of RAM
   FFFE                      16 RESETVEC	=	0xFFFE			; reset vector for normal modes
   C000                      17 ROMSTART	=	0xC000			; Lowest EPROM address.
   FFFF                      18 ROMEND		=	0xFFFF			; Highest EPROM address.
   0FFF                      19 STACKTOP	=	0x0FFF			; top of stack (0x0FFF - 0x0100)
                             20 
                             21 ;.------------------------------------------------------------------------.
                             22 ;|                           TARGET CONTROL                               |
                             23 ;`------------------------------------------------------------------------'
                             24 
                             25 ; set the following variable to 1 to place program in EEPROM
                             26 ; set the following variable to 0 to place program in RAM
                             27 
   0000                      28 TARGETROM = 0		; 0 == RAM, 1 == EEPROM
                             29 
                             30 ;.------------------------------------------------------------------------.
                             31 ;|                               MAIN                                     |
                             32 ;`------------------------------------------------------------------------'
                             33 
                             34 				.MODULE MAIN				
                             35 				.AREA   StartUp (ABS)
                             36 								
   0000                      37 				.if TARGETROM == 1
                             38 					.ORG    ROMSTART
                             39 				.else
                             40 					.ORG	RAMSTART					
                             41 				.endif
                             42 
   1040                      43 Main:			
   0000                      44 				.if TARGETROM == 1
                             45 					LDS		#STACKTOP		; must have stack!
                             46 				.endif
                             47 				
                             48 				; place your program here ********************
                             49 				
   1040 BD 10 46             50 				jsr		swapxy
   1043 7E C0 00             51 				jmp		romstart
                             52 				
   1046 3C                   53 swapxy:			pshx
   1047 18 3C                54 				pshy
   1049 38                   55 				pulx
   104A 18 38                56 				puly
AS68HC11 Assembler - Computer Engineering Tech.  -  Version: 1.56gb    Page 2
by Simon Walker


   104C 39                   57 				rts
                             58 							
                             59 				; ********************************************
                             60 
                             61 ;.------------------------------------------------------------------------.
                             62 ;|                            INCLUDES                                    |
                             63 ;`------------------------------------------------------------------------'
                             64 
                             65 ;.------------------------------------------------------------------------.
                             66 ;|                            CONSTANT  DATA                              |
                             67 ;`------------------------------------------------------------------------'
                             68 				
                             69 ;DumbTable:		.db		0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
                             70 
                             71 ;Copyright:		.ascii	"Copyright (c) 2002 by the person that wrote it. "
                             72 ;				.asciz	"Hands off."
                             73 
                             74 ;.------------------------------------------------------------------------.
                             75 ;|                             VARIABLES                                  |
                             76 ;`------------------------------------------------------------------------'
                             77 
                             78 ;.------------------------------------------------------------------------.
                             79 ;|                           RESET VECTOR                                 |
                             80 ;`------------------------------------------------------------------------'
                             81 
                             82 				.AREA	RESETVEC (ABS)
                             83 
   0000                      84 				.if TARGETROM == 1
                             85 					.org	RESETVEC		 ;Place the reset vector so that
                             86 					.DW		Main		     ;we can run this from power-up.
                             87 				.endif
                             88 				

   Input File: boil.asm
   Directory:  C:\DOCUME~1\ABABCO~1\DESKTOP\START_~1
   Date:       2007/03/06
   Time:       12:54:52